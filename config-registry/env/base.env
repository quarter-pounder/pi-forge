# Core settings
HOSTNAME=pi-forge
DOMAIN=
USERNAME=pi
EMAIL=
SSH_PUBLIC_KEY=""
TIMEZONE=UTC
LOCALE=en_US.UTF-8

# Target device (auto-detected if empty)
NVME_DEVICE=/dev/nvme0n1

# Ubuntu image source (auto-selects latest LTS if empty)
UBUNTU_VERSION=
UBUNTU_IMG_URL=

# Forgejo
FORGEJO_DOMAIN=forgejo.${DOMAIN}
FORGEJO_EXTERNAL_URL=https://${FORGEJO_DOMAIN}
FORGEJO_IMAGE=code.forgejo.org/forgejo/forgejo:13
FORGEJO_APP_NAME="Forgejo Pi"
FORGEJO_ADMIN_USERNAME=forgejo-admin
FORGEJO_ADMIN_PASSWORD=
FORGEJO_ADMIN_EMAIL=
FORGEJO_APP_SECRET=
FORGEJO_LFS_JWT_SECRET=
FORGEJO_METRICS_TOKEN=
FORGEJO_UID=1000
FORGEJO_GID=1000
FORGEJO_MIRROR_ALLOWED_DOMAINS=github.com,codeberg.org
FORGEJO_MIRROR_BLOCKED_DOMAINS=
FORGEJO_MIRROR_ALLOW_LOCALNETWORKS=false
FORGEJO_ACTIONS_RUNNER_IMAGE=code.forgejo.org/forgejo/runner:11
FORGEJO_ACTIONS_RUNNER_TOKEN=

# GitHub Actions Runner
GITHUB_ACTIONS_RUNNER_IMAGE=myoung34/github-runner:latest
GITHUB_ACTIONS_RUNNER_NAME=pi-forge-runner
GITHUB_ACTIONS_RUNNER_REPO_URL=
GITHUB_ACTIONS_RUNNER_TOKEN=
GITHUB_ACTIONS_RUNNER_LABELS=self-hosted,Linux,ARM64
GITHUB_ACTIONS_RUNNER_DOCKER_ENABLED=true
# Note: Runner tokens expire after 1 hour if not used. Deploy quickly after generating token.
# REPO_URL format: https://github.com/owner/repo or owner/repo (for repo-level runner)
# Leave empty for organization-level runner (use RUNNER_ORG instead)
# External runner metrics (for laptop/remote runners)
EXTERNAL_RUNNER_METRICS_IP=

# PostgreSQL (shared)
POSTGRES_IMAGE=postgres:16-alpine
POSTGRES_SUPERUSER=postgres
POSTGRES_SUPERUSER_PASSWORD=
POSTGRES_DB_FORGEJO=forgejo
POSTGRES_USER_FORGEJO=forgejo
POSTGRES_PASSWORD_FORGEJO=
POSTGRES_DB_WOODPECKER=woodpecker
POSTGRES_USER_WOODPECKER=woodpecker
POSTGRES_PASSWORD_WOODPECKER=
POSTGRES_PGPASS_FILE=

# Monitoring images
PROMETHEUS_IMAGE=prom/prometheus:v2.52.0
ALERTMANAGER_IMAGE=prom/alertmanager:v0.27.0
GRAFANA_IMAGE=grafana/grafana:10.4.7
NODE_EXPORTER_IMAGE=prom/node-exporter:v1.8.2
CADVISOR_IMAGE=gcr.io/cadvisor/cadvisor-arm64:v0.52.0
LOKI_IMAGE=grafana/loki:3.0.0
ALLOY_IMAGE=grafana/alloy:v1.4.1
PROMETHEUS_RETENTION=30d
GRAFANA_ADMIN_PASSWORD=admin
NODE_EXPORTER_TEXTFILE_DIR=/srv/monitoring/node-exporter/textfile

# Adblocker
PIHOLE_IMAGE=pihole/pihole:2025.11.1
UNBOUND_IMAGE=crazymax/unbound:1.24.0
PIHOLE_WEB_PASSWORD=admin
PIHOLE_LOCAL_IPV4=
PIHOLE_API_TOKEN=
ADBLOCKER_NETWORK_SUBNET=172.81.0.0/24
ADBLOCKER_UNBOUND_IP=172.81.0.2

# Registry
REGISTRY_IMAGE=registry:2.8.3
REGISTRY_DOMAIN=registry.${DOMAIN}
REGISTRY_EXTERNAL_URL=https://${REGISTRY_DOMAIN}
REGISTRY_API_URL=http://forgejo-registry:5000
REGISTRY_HTTP_SECRET=
REGISTRY_ISSUER=forgejo-registry
REGISTRY_TOKEN_REALM=http://forgejo/jwt/auth

# Woodpecker CI
WOODPECKER_SERVER_IMAGE=woodpeckerci/woodpecker-server:v3.11.0
WOODPECKER_RUNNER_IMAGE=woodpeckerci/woodpecker-agent:v3.11.0
WOODPECKER_HOST=https://ci.${DOMAIN}
WOODPECKER_GITEA_URL=${FORGEJO_EXTERNAL_URL}
WOODPECKER_AGENT_SECRET=
WOODPECKER_FORGEJO_CLIENT_ID=
WOODPECKER_FORGEJO_CLIENT_SECRET=
WOODPECKER_ADMIN_USERS=forgejo-admin
WOODPECKER_LOG_LEVEL=info

# Cloudflare Tunnel
CLOUDFLARE_IMAGE=cloudflare/cloudflared:2024.8.1
CLOUDFLARE_ACCOUNT_ID=
CLOUDFLARE_TUNNEL_NAME=forgejo-pi
CLOUDFLARE_TUNNEL_TOKEN=

# SMTP (notifications)
SMTP_ADDRESS=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_DOMAIN=gmail.com
SMTP_FROM=
SMTP_DISPLAY_NAME="Forgejo Pi"
SMTP_REPLY_TO=noreply@${DOMAIN}
SMTP_AUTH=login
SMTP_STARTTLS=true
SMTP_TLS=false
SMTP_SSL_VERIFY_MODE=peer

# Backups
USE_GCP=true
GCP_PROJECT_ID=
GCP_REGION=us-central1
GOOGLE_APPLICATION_CREDENTIALS=
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
BACKUP_DIR=/srv/backups
BACKUP_BUCKET=
BACKUP_RETENTION_DAYS=7
RESTIC_PASSWORD_FILE=config-registry/env/restic.password
RESTIC_REMOTE=

# Terraform variables
CLOUDFLARE_API_TOKEN=
ALERT_EMAIL=

